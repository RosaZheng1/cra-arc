
<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
   <!--[if gt IE 8]><!-->
   <html class="no-js" lang="en" dir="ltr">
      <!--<![endif]-->
      <head>
         <meta charset="utf-8">
         <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
         <title>1 Date calculator</title>
         <meta content="width=device-width,initial-scale=1" name="viewport">
         <meta name="robots" content="noindex, follow">
       <!-- Meta data-->
                 <!-- Load closure template scripts --> 
 <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/soyutils.js"></script>
         <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/wet-en.js"></script>
         <link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
         <link href="https://www.canada.ca/etc/designs/canada/wet-boew/m%C3%A9li-m%C3%A9lo/2023-10-mount-revelstoke.min.css" rel="stylesheet">
		 <link href="https://www.canada.ca/etc/designs/canada/wet-boew/css/theme.min.css" rel="stylesheet">
         <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> 
	      <!-- Write closure template -->
         <script type="text/javascript">
            document.write(wet.builder.refTop({
            }));
         </script>
      </head>
      <body vocab="http://schema.org/" typeof="WebPage" class="experimental">
         <div id="def-top">
         </div>
         <!-- Write closure template -->
         <script type="text/javascript">
            var defTop = document.getElementById("def-top");
            defTop.outerHTML = wet.builder.top({
              lngLinks: [{
                lang: "fr",
                href: "#",
                text: "Français"
              }],
              breadcrumbs: [{
                title: "Canada.ca",
                href: "https://www.canada.ca/en.html"
              },{
                title: "Taxes",
                href: "https://www.canada.ca/en/services/taxes.html"
              },{
                title: "Payroll",
                href: "https://test.canada.ca/cra-arc/payroll/index.html"
              },
{
                title: "Payroll compliance and enforcement",
                href: "https://test.canada.ca/cra-arc/payroll/compliance/index.html"
              }
              ],
              search: true,
              siteMenu: true,
              showPreContent: true
            });
         </script>
         <main role="main" property="mainContentOfPage" class="container">


<h1 property="name" id="wb-cont" class="gc-thickline">Date calculator</h1>


<a href="#" data-toggle="modal" data-target="#modal_date_calc"><i class="fa fa-calculator"></i> Date calculator</a>

 <a href="#modal_date_calc" aria-controls="modal_date_calc" data-num="30" role="button" class="date_calc btn btn-primary wb-lbx">
<i class="fa fa-calculator"></i> Date calculator</a>


<section id="modal_date_calc" class="mfp-hide modal-dialog modal-content overlay-def no-print" tabindex="-1" aria-live="assertive" aria-modal="true">
			<header class="modal-header">
				<h2 class="modal-title">Date calculator</h1>
			</header>
			<div class="modal-body">
				<div class="wb-tabs ignore-session">
					<div class="tabpanels">
						<details id="date_calc_opt1" open="open">
							<summary>Date after amount of time</summary>
							<form>
							<div class="container-fluid">
								<div class="form-group row">
									<div class="col-md-6">
										<label for="date_calc_from1">Start date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
										<input class="form-control" type="date" id="date_calc_from1" name="date_calc_from" min="1900-01-01" max="2050-01-01" required/>
									</div>
								</div>
								<div class="form-group row">
									<div class="col-md-12">
										<label for="date_calc_elapsed">Elapsed time</label>
										<div class="input-group">
											<input type="number" id="date_calc_elapsed" class="form-control num" min="1" max="3653" maxlength="4" required>
											<span class="input-group-btn">
												<select id="date_calc_unit" class="btn btn-default brdr-rds-0" title="Temporal unit" required>
													<option value="days" selected>days</option>
													<option value="work">business days</option>
													<option value="weeks">weeks</option>
													<option value="months">months</option>
													<option value="years">years</option>
												</select>
											</span>
											<span class="input-group-btn">
												<select id="date_calc_dir" class="btn btn-default" title="Temporal direction" required>
													<option value="true" selected>in the future</option>
													<option value="false">in the past</option>
												</select>
											</span>
										</div>
									</div>
								</div>
								<div id="date_calc_opt1_result" class="row hidden">
									<div class="col-md-12">
										<h4>Your result - The calculated date is:</h4>
										<p></p>
									</div>
								</div>
								<div class="mrgn-tp-lg mrgn-bttm-md">
<button type="button" class="btn btn-primary mrgn-rght-sm" onclick="calculateDate()">Calculate</button>
<button type="reset" class="btn btn-default">Clear</button>
</div>
							</div>
							</form>
						</details>
						<details id="date_calc_opt2">
							<summary>Elapsed time between two dates</summary>
							<form>
							<div class="container-fluid">
								<div class="form-group row">
									<div class="col-md-6">
										<label for="date_calc_from2">Start date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
										<input class="form-control" type="date" id="date_calc_from2" name="date_calc_from" min="1900-01-01" max="2050-01-01" required>
									</div>
									<div class="col-md-6">
										<label for="date_calc_to2">End date <span class="datepicker-format">(<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
										<input class="form-control" type="date" id="date_calc_to2" name="date_calc_to" min="1900-01-01" max="2050-01-01" required>
									</div>
								</div>
								<div id="date_calc_opt2_result" class="row hidden mrgn-bttm-lg">
									<div class="col-md-12">
										<h4>Your result - Elapsed number of business days:</h4>
										<p id="resultText"></p>
									</div>
								</div>
								<div class="mrgn-tp-lg mrgn-bttm-md">
<button type="button" class="btn btn-primary mrgn-rght-sm" onclick="calculateBusinessDays()">Calculate</button>
<button type="reset" class="btn btn-default">Clear</button>
</div>
							</div>
							</form>
						</details>
					</div>
				</div>
			</div>
		</section>

<script>
  // Function to check if a date is a weekend
  function isWeekend(date) {
      const day = date.getDay();
      return (day === 0 || day === 6); // 0 = Sunday, 6 = Saturday
  }
  // Function to add time (days, business days, weeks, months, or years) to a date
  function calculateDate() {
      const startDate = new Date(document.getElementById("date_calc_from1").value);
      const elapsed = parseInt(document.getElementById("date_calc_elapsed").value);
      const unit = document.getElementById("date_calc_unit").value;
      const direction = document.getElementById("date_calc_dir").value === "true"; // true = future, false = past
      let resultDate = new Date(startDate); // Start from this date
      if (isNaN(startDate) || isNaN(elapsed)) {
          alert("Please enter a valid start date and elapsed time.");
          return;
      }
      // Adding time based on the selected unit
      if (unit === "days") {
          resultDate = addDays(resultDate, elapsed, direction, false);
      } else if (unit === "work") {
          resultDate = addDays(resultDate, elapsed, direction, true);
      } else if (unit === "weeks") {
          resultDate.setDate(resultDate.getDate() + (direction ? elapsed * 7 : -elapsed * 7));
      } else if (unit === "months") {
          resultDate.setMonth(resultDate.getMonth() + (direction ? elapsed : -elapsed));
      } else if (unit === "years") {
          resultDate.setFullYear(resultDate.getFullYear() + (direction ? elapsed : -elapsed));
      }
     // Display the result in the format: Sunday, October 14, 2024
      document.getElementById("date_calc_opt1_result").classList.remove('hidden');
      document.getElementById("date_calc_opt1_result").getElementsByTagName('p')[0].innerHTML =
          `${formatDate(resultDate)}`;
  }
  // Helper function to add or subtract days, with an option for business days
  function addDays(date, days, forward = true, businessDays = false) {
      let direction = forward ? 1 : -1;
      while (days > 0) {
          date.setDate(date.getDate() + direction);
          if (!businessDays || !isWeekend(date)) {
              days--;
          }
      }
      return date;
  }
  // Helper function to format date as: Sunday, October 14, 2024
  function formatDate(date) {
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString(undefined, options);
  }

</script>
		 
<script>
  // Function to check if a date is a weekend
  function isWeekend(date) {
      const day = date.getDay();
      return (day === 0 || day === 6); // 0 = Sunday, 6 = Saturday
  }
  // Function to calculate business days between two dates
  function calculateBusinessDays() {
      const startDate = new Date(document.getElementById("date_calc_from2").value);
      const endDate = new Date(document.getElementById("date_calc_to2").value);
      const resultText = document.getElementById("resultText");
      // Check for valid date inputs
      if (isNaN(startDate) || isNaN(endDate)) {
          resultText.innerHTML = "Please select valid start and end dates.";
          document.getElementById("date_calc_opt2_result").classList.remove('hidden');
          return;
      }
      // Check if start date is greater than end date
      if (startDate > endDate) {
          resultText.innerHTML = "End date must be after the start date.";
          document.getElementById("date_calc_opt2_result").classList.remove('hidden');
          return;
      }
      let businessDays = 0;
      let currentDate = new Date(startDate);
      // Count business days between the two dates
      while (currentDate <= endDate) {
          if (!isWeekend(currentDate)) {
              businessDays++;
          }
          currentDate.setDate(currentDate.getDate() + 1);
      }
      // Display the result
      document.getElementById("date_calc_opt2_result").classList.remove('hidden');
      resultText.innerHTML = `${businessDays} business days`;
  }
</script>

<script>
 // Function to reset all inputs when the modal is closed
$(document).on('mfpClose', function() {
 // Clear all input fields within the modal
 $('#modal_date_calc').find('input[type="date"], input[type="number"], select').val('');
 // Hide any result sections
 $('#date_calc_opt1_result').addClass('hidden');
 $('#date_calc_opt2_result').addClass('hidden');
 // Clear result text
 $('#date_calc_opt1_result p').text('');
 $('#resultText').text('');
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


 <div id="def-preFooter"></div>
            <!-- Write closure template -->
            <script type="text/javascript">
               var defPreFooter = document.getElementById("def-preFooter");
               defPreFooter.outerHTML = wet.builder.preFooter({
               dateModified: "2020-03-13",
               showPostContent: true,
               showFeedback: true,
               showShare: true
               });
            </script>
         </main>
         <div id="def-footer">
         </div>
         <!-- Write closure template -->
         <script type="text/javascript">
            var defFooter = document.getElementById("def-footer");
            defFooter.outerHTML = wet.builder.footer({
            showFooter: true,
            showFeatures: true
            });
         </script>
         <!-- Write closure template -->
         <script type="text/javascript">
            document.write(wet.builder.refFooter({
            }));
         </script>
         <script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script>
 <script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script>
<script src="https://www.canada.ca/etc/designs/canada/wet-boew/méli-mélo/2023-10-mount-revelstoke.min.js"></script>
		     </body>
   </html>
